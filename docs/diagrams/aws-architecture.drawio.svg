<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" width="1200" height="920" viewBox="-0.5 -0.5 1200 920" content="&lt;mxfile host=&quot;app.diagrams.net&quot;&gt;&lt;diagram name=&quot;AWS Architecture&quot; id=&quot;aws-arch&quot;&gt;&lt;mxGraphModel dx=&quot;1200&quot; dy=&quot;920&quot; grid=&quot;1&quot; gridSize=&quot;10&quot; guides=&quot;1&quot; tooltips=&quot;1&quot; connect=&quot;1&quot; arrows=&quot;1&quot; fold=&quot;1&quot; page=&quot;1&quot; pageScale=&quot;1&quot; pageWidth=&quot;1200&quot; pageHeight=&quot;920&quot; math=&quot;0&quot; shadow=&quot;0&quot;&gt;&lt;root&gt;&lt;mxCell id=&quot;0&quot;/&gt;&lt;mxCell id=&quot;1&quot; parent=&quot;0&quot;/&gt;&lt;mxCell id=&quot;title&quot; value=&quot;AWS Infrastructure Architecture&quot; style=&quot;text;html=1;fontSize=20;fontStyle=1;fillColor=none;align=center;verticalAlign=middle;&quot; vertex=&quot;1&quot; parent=&quot;1&quot;&gt;&lt;mxGeometry x=&quot;350&quot; y=&quot;10&quot; width=&quot;500&quot; height=&quot;30&quot; as=&quot;geometry&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=&quot;user&quot; value=&quot;User&quot; style=&quot;shape=mxgraph.aws4.client;whiteSpace=wrap;html=1;&quot; vertex=&quot;1&quot; parent=&quot;1&quot;&gt;&lt;mxGeometry x=&quot;555&quot; y=&quot;50&quot; width=&quot;50&quot; height=&quot;50&quot; as=&quot;geometry&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=&quot;auth0&quot; value=&quot;Auth0&amp;#xa;JWT / OAuth2 / JWKS&quot; style=&quot;rounded=1;whiteSpace=wrap;html=1;fillColor=#f0f0f0;fontSize=10;&quot; vertex=&quot;1&quot; parent=&quot;1&quot;&gt;&lt;mxGeometry x=&quot;930&quot; y=&quot;50&quot; width=&quot;140&quot; height=&quot;50&quot; as=&quot;geometry&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=&quot;cf&quot; value=&quot;CloudFront&amp;#xa;CDN / HTTPS / SPA Error Handling&quot; style=&quot;outlineConnect=0;fontColor=#232F3E;gradientColor=none;fillColor=#8C4FFF;strokeColor=none;dashed=0;verticalLabelPosition=bottom;verticalAlign=top;align=center;html=1;fontSize=10;fontStyle=0;aspect=fixed;pointerEvents=1;shape=mxgraph.aws4.resourceIcon;resIcon=mxgraph.aws4.cloudfront;&quot; vertex=&quot;1&quot; parent=&quot;1&quot;&gt;&lt;mxGeometry x=&quot;556&quot; y=&quot;130&quot; width=&quot;48&quot; height=&quot;48&quot; as=&quot;geometry&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=&quot;s3&quot; value=&quot;S3 Bucket&amp;#xa;React SPA (Static Files)&quot; style=&quot;outlineConnect=0;fontColor=#232F3E;gradientColor=none;fillColor=#277116;strokeColor=none;dashed=0;verticalLabelPosition=bottom;verticalAlign=top;align=center;html=1;fontSize=10;fontStyle=0;aspect=fixed;pointerEvents=1;shape=mxgraph.aws4.resourceIcon;resIcon=mxgraph.aws4.s3;&quot; vertex=&quot;1&quot; parent=&quot;1&quot;&gt;&lt;mxGeometry x=&quot;146&quot; y=&quot;240&quot; width=&quot;48&quot; height=&quot;48&quot; as=&quot;geometry&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=&quot;vpc&quot; value=&quot;VPC 172.16.0.0/16&quot; style=&quot;points=[[0,0],[0.25,0],[0.5,0],[0.75,0],[1,0],[1,0.25],[1,0.5],[1,0.75],[1,1],[0.75,1],[0.5,1],[0.25,1],[0,1],[0,0.75],[0,0.5],[0,0.25]];outlineConnect=0;gradientColor=none;html=1;whiteSpace=wrap;fontSize=12;fontStyle=1;container=1;pointerEvents=0;collapsible=0;recursiveResize=0;shape=mxgraph.aws4.group;grIcon=mxgraph.aws4.group_vpc;strokeColor=#248814;fillColor=none;verticalAlign=top;align=left;spacingLeft=30;fontColor=#AAB7B8;dashed=0;&quot; vertex=&quot;1&quot; parent=&quot;1&quot;&gt;&lt;mxGeometry x=&quot;350&quot; y=&quot;230&quot; width=&quot;800&quot; height=&quot;540&quot; as=&quot;geometry&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=&quot;pub_sub&quot; value=&quot;Public Subnet 172.16.1.0/24 (ap-northeast-1a)&quot; style=&quot;points=[[0,0],[0.25,0],[0.5,0],[0.75,0],[1,0],[1,0.25],[1,0.5],[1,0.75],[1,1],[0.75,1],[0.5,1],[0.25,1],[0,1],[0,0.75],[0,0.5],[0,0.25]];outlineConnect=0;gradientColor=none;html=1;whiteSpace=wrap;fontSize=11;fontStyle=0;container=1;pointerEvents=0;collapsible=0;recursiveResize=0;shape=mxgraph.aws4.group;grIcon=mxgraph.aws4.group_subnet;strokeColor=#248814;fillColor=none;verticalAlign=top;align=left;spacingLeft=30;fontColor=#AAB7B8;dashed=0;&quot; vertex=&quot;1&quot; parent=&quot;vpc&quot;&gt;&lt;mxGeometry x=&quot;20&quot; y=&quot;30&quot; width=&quot;380&quot; height=&quot;140&quot; as=&quot;geometry&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=&quot;priv_sub&quot; value=&quot;Private Subnets 172.16.2.0/24 (1a) &amp;amp; 172.16.3.0/24 (1c)&quot; style=&quot;points=[[0,0],[0.25,0],[0.5,0],[0.75,0],[1,0],[1,0.25],[1,0.5],[1,0.75],[1,1],[0.75,1],[0.5,1],[0.25,1],[0,1],[0,0.75],[0,0.5],[0,0.25]];outlineConnect=0;gradientColor=none;html=1;whiteSpace=wrap;fontSize=11;fontStyle=0;container=1;pointerEvents=0;collapsible=0;recursiveResize=0;shape=mxgraph.aws4.group;grIcon=mxgraph.aws4.group_subnet;strokeColor=#147EBA;fillColor=none;verticalAlign=top;align=left;spacingLeft=30;fontColor=#AAB7B8;dashed=0;&quot; vertex=&quot;1&quot; parent=&quot;vpc&quot;&gt;&lt;mxGeometry x=&quot;20&quot; y=&quot;190&quot; width=&quot;760&quot; height=&quot;330&quot; as=&quot;geometry&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=&quot;nat&quot; value=&quot;NAT Gateway&amp;#xa;(Elastic IP)&quot; style=&quot;outlineConnect=0;fontColor=#232F3E;gradientColor=none;fillColor=#8C4FFF;strokeColor=none;dashed=0;verticalLabelPosition=bottom;verticalAlign=top;align=center;html=1;fontSize=9;fontStyle=0;aspect=fixed;pointerEvents=1;shape=mxgraph.aws4.nat_gateway;&quot; vertex=&quot;1&quot; parent=&quot;vpc&quot;&gt;&lt;mxGeometry x=&quot;40&quot; y=&quot;70&quot; width=&quot;40&quot; height=&quot;40&quot; as=&quot;geometry&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=&quot;igw&quot; value=&quot;Internet&amp;#xa;Gateway&quot; style=&quot;outlineConnect=0;fontColor=#232F3E;gradientColor=none;fillColor=#8C4FFF;strokeColor=none;dashed=0;verticalLabelPosition=bottom;verticalAlign=top;align=center;html=1;fontSize=9;fontStyle=0;aspect=fixed;pointerEvents=1;shape=mxgraph.aws4.internet_gateway;&quot; vertex=&quot;1&quot; parent=&quot;vpc&quot;&gt;&lt;mxGeometry x=&quot;160&quot; y=&quot;70&quot; width=&quot;40&quot; height=&quot;40&quot; as=&quot;geometry&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=&quot;bastion&quot; value=&quot;Bastion Host&amp;#xa;(EC2)&quot; style=&quot;outlineConnect=0;fontColor=#232F3E;gradientColor=none;fillColor=#ED7100;strokeColor=none;dashed=0;verticalLabelPosition=bottom;verticalAlign=top;align=center;html=1;fontSize=9;fontStyle=0;aspect=fixed;pointerEvents=1;shape=mxgraph.aws4.resourceIcon;resIcon=mxgraph.aws4.ec2;&quot; vertex=&quot;1&quot; parent=&quot;vpc&quot;&gt;&lt;mxGeometry x=&quot;300&quot; y=&quot;70&quot; width=&quot;40&quot; height=&quot;40&quot; as=&quot;geometry&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=&quot;alb&quot; value=&quot;ALB (Internal)&amp;#xa;HTTP:80 / Rule: /api/*&quot; style=&quot;outlineConnect=0;fontColor=#232F3E;gradientColor=none;fillColor=#8C4FFF;strokeColor=none;dashed=0;verticalLabelPosition=bottom;verticalAlign=top;align=center;html=1;fontSize=9;fontStyle=0;aspect=fixed;pointerEvents=1;shape=mxgraph.aws4.resourceIcon;resIcon=mxgraph.aws4.elastic_load_balancing;&quot; vertex=&quot;1&quot; parent=&quot;vpc&quot;&gt;&lt;mxGeometry x=&quot;180&quot; y=&quot;230&quot; width=&quot;48&quot; height=&quot;48&quot; as=&quot;geometry&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=&quot;ecs&quot; value=&quot;ECS Fargate&amp;#xa;CPU:256 / Mem:512MB&amp;#xa;NestJS API (:3000)&quot; style=&quot;outlineConnect=0;fontColor=#232F3E;gradientColor=none;fillColor=#ED7100;strokeColor=none;dashed=0;verticalLabelPosition=bottom;verticalAlign=top;align=center;html=1;fontSize=9;fontStyle=0;aspect=fixed;pointerEvents=1;shape=mxgraph.aws4.resourceIcon;resIcon=mxgraph.aws4.ecs;&quot; vertex=&quot;1&quot; parent=&quot;vpc&quot;&gt;&lt;mxGeometry x=&quot;170&quot; y=&quot;340&quot; width=&quot;48&quot; height=&quot;48&quot; as=&quot;geometry&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=&quot;aurora&quot; value=&quot;Aurora Serverless v2&amp;#xa;PostgreSQL 16.6&amp;#xa;0.0-1.0 ACU / Encrypted&quot; style=&quot;outlineConnect=0;fontColor=#232F3E;gradientColor=none;fillColor=#C925D1;strokeColor=none;dashed=0;verticalLabelPosition=bottom;verticalAlign=top;align=center;html=1;fontSize=9;fontStyle=0;aspect=fixed;pointerEvents=1;shape=mxgraph.aws4.resourceIcon;resIcon=mxgraph.aws4.aurora;&quot; vertex=&quot;1&quot; parent=&quot;vpc&quot;&gt;&lt;mxGeometry x=&quot;480&quot; y=&quot;330&quot; width=&quot;48&quot; height=&quot;48&quot; as=&quot;geometry&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=&quot;ecr&quot; value=&quot;ECR&amp;#xa;Container Registry&quot; style=&quot;outlineConnect=0;fontColor=#232F3E;gradientColor=none;fillColor=#ED7100;strokeColor=none;dashed=0;verticalLabelPosition=bottom;verticalAlign=top;align=center;html=1;fontSize=9;fontStyle=0;aspect=fixed;pointerEvents=1;shape=mxgraph.aws4.resourceIcon;resIcon=mxgraph.aws4.ecr;&quot; vertex=&quot;1&quot; parent=&quot;vpc&quot;&gt;&lt;mxGeometry x=&quot;480&quot; y=&quot;230&quot; width=&quot;48&quot; height=&quot;48&quot; as=&quot;geometry&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=&quot;ssm&quot; value=&quot;SSM Parameter Store&amp;#xa;SecureString (DB URL)&quot; style=&quot;outlineConnect=0;fontColor=#232F3E;gradientColor=none;fillColor=#E7157B;strokeColor=none;dashed=0;verticalLabelPosition=bottom;verticalAlign=top;align=center;html=1;fontSize=9;fontStyle=0;aspect=fixed;pointerEvents=1;shape=mxgraph.aws4.resourceIcon;resIcon=mxgraph.aws4.systems_manager;&quot; vertex=&quot;1&quot; parent=&quot;vpc&quot;&gt;&lt;mxGeometry x=&quot;40&quot; y=&quot;440&quot; width=&quot;48&quot; height=&quot;48&quot; as=&quot;geometry&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=&quot;cw&quot; value=&quot;CloudWatch Logs&amp;#xa;Retention: 7 days&quot; style=&quot;outlineConnect=0;fontColor=#232F3E;gradientColor=none;fillColor=#E7157B;strokeColor=none;dashed=0;verticalLabelPosition=bottom;verticalAlign=top;align=center;html=1;fontSize=9;fontStyle=0;aspect=fixed;pointerEvents=1;shape=mxgraph.aws4.resourceIcon;resIcon=mxgraph.aws4.cloudwatch_2;&quot; vertex=&quot;1&quot; parent=&quot;vpc&quot;&gt;&lt;mxGeometry x=&quot;220&quot; y=&quot;440&quot; width=&quot;48&quot; height=&quot;48&quot; as=&quot;geometry&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=&quot;vpce&quot; value=&quot;VPC Endpoints&amp;#xa;(SSM, ECR, Logs)&quot; style=&quot;outlineConnect=0;fontColor=#232F3E;gradientColor=none;fillColor=#8C4FFF;strokeColor=none;dashed=0;verticalLabelPosition=bottom;verticalAlign=top;align=center;html=1;fontSize=9;fontStyle=0;aspect=fixed;pointerEvents=1;shape=mxgraph.aws4.endpoint;&quot; vertex=&quot;1&quot; parent=&quot;vpc&quot;&gt;&lt;mxGeometry x=&quot;630&quot; y=&quot;230&quot; width=&quot;48&quot; height=&quot;48&quot; as=&quot;geometry&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=&quot;cp_be&quot; value=&quot;CodePipeline (Backend)&amp;#xa;Source&#8594;Build&#8594;Deploy&quot; style=&quot;outlineConnect=0;fontColor=#232F3E;gradientColor=none;fillColor=#C7131F;strokeColor=none;dashed=0;verticalLabelPosition=bottom;verticalAlign=top;align=center;html=1;fontSize=9;fontStyle=0;aspect=fixed;pointerEvents=1;shape=mxgraph.aws4.resourceIcon;resIcon=mxgraph.aws4.codepipeline;&quot; vertex=&quot;1&quot; parent=&quot;1&quot;&gt;&lt;mxGeometry x=&quot;55&quot; y=&quot;460&quot; width=&quot;48&quot; height=&quot;48&quot; as=&quot;geometry&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=&quot;cp_fe&quot; value=&quot;CodePipeline (Frontend)&amp;#xa;Source&#8594;Build&quot; style=&quot;outlineConnect=0;fontColor=#232F3E;gradientColor=none;fillColor=#C7131F;strokeColor=none;dashed=0;verticalLabelPosition=bottom;verticalAlign=top;align=center;html=1;fontSize=9;fontStyle=0;aspect=fixed;pointerEvents=1;shape=mxgraph.aws4.resourceIcon;resIcon=mxgraph.aws4.codepipeline;&quot; vertex=&quot;1&quot; parent=&quot;1&quot;&gt;&lt;mxGeometry x=&quot;55&quot; y=&quot;360&quot; width=&quot;48&quot; height=&quot;48&quot; as=&quot;geometry&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=&quot;github&quot; value=&quot;GitHub&amp;#xa;(CodeStar Connection)&quot; style=&quot;rounded=1;whiteSpace=wrap;html=1;fillColor=#24292E;fontColor=#FFFFFF;strokeColor=#24292E;fontSize=10;&quot; vertex=&quot;1&quot; parent=&quot;1&quot;&gt;&lt;mxGeometry x=&quot;20&quot; y=&quot;560&quot; width=&quot;140&quot; height=&quot;50&quot; as=&quot;geometry&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=&quot;sg_label&quot; value=&quot;Security Groups: CF VPC Origin SG &#8594; ALB SG (HTTP:80) &#8594; ECS SG (:3000) &#8594; DB SG (:5432) / Bastion SG &#8594; DB SG&quot; style=&quot;text;html=1;fontSize=10;fillColor=none;align=left;verticalAlign=top;whiteSpace=wrap;rounded=1;strokeColor=#999999;dashed=1;&quot; vertex=&quot;1&quot; parent=&quot;1&quot;&gt;&lt;mxGeometry x=&quot;20&quot; y=&quot;840&quot; width=&quot;550&quot; height=&quot;30&quot; as=&quot;geometry&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=&quot;region_label&quot; value=&quot;Region: ap-northeast-1 (Tokyo)&quot; style=&quot;text;html=1;fontSize=11;fillColor=none;align=left;fontStyle=2;&quot; vertex=&quot;1&quot; parent=&quot;1&quot;&gt;&lt;mxGeometry x=&quot;20&quot; y=&quot;880&quot; width=&quot;250&quot; height=&quot;20&quot; as=&quot;geometry&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=&quot;e1&quot; value=&quot;HTTPS&quot; style=&quot;edgeStyle=orthogonalEdgeStyle;rounded=1;fontSize=9;&quot; edge=&quot;1&quot; source=&quot;user&quot; target=&quot;cf&quot; parent=&quot;1&quot;&gt;&lt;mxGeometry relative=&quot;1&quot; as=&quot;geometry&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=&quot;e2&quot; value=&quot;/* (OAC SigV4)&quot; style=&quot;edgeStyle=orthogonalEdgeStyle;rounded=1;fontSize=9;&quot; edge=&quot;1&quot; source=&quot;cf&quot; target=&quot;s3&quot; parent=&quot;1&quot;&gt;&lt;mxGeometry relative=&quot;1&quot; as=&quot;geometry&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=&quot;e3&quot; value=&quot;/api/* (VPC Origin)&quot; style=&quot;edgeStyle=orthogonalEdgeStyle;rounded=1;fontSize=9;&quot; edge=&quot;1&quot; source=&quot;cf&quot; target=&quot;alb&quot; parent=&quot;1&quot;&gt;&lt;mxGeometry relative=&quot;1&quot; as=&quot;geometry&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=&quot;e4&quot; value=&quot;:3000&quot; style=&quot;edgeStyle=orthogonalEdgeStyle;rounded=1;fontSize=9;&quot; edge=&quot;1&quot; source=&quot;alb&quot; target=&quot;ecs&quot; parent=&quot;1&quot;&gt;&lt;mxGeometry relative=&quot;1&quot; as=&quot;geometry&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=&quot;e5&quot; value=&quot;:5432 (SSL)&quot; style=&quot;edgeStyle=orthogonalEdgeStyle;rounded=1;fontSize=9;&quot; edge=&quot;1&quot; source=&quot;ecs&quot; target=&quot;aurora&quot; parent=&quot;1&quot;&gt;&lt;mxGeometry relative=&quot;1&quot; as=&quot;geometry&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=&quot;e6&quot; value=&quot;image pull&quot; style=&quot;edgeStyle=orthogonalEdgeStyle;rounded=1;dashed=1;fontSize=9;&quot; edge=&quot;1&quot; source=&quot;ecr&quot; target=&quot;ecs&quot; parent=&quot;1&quot;&gt;&lt;mxGeometry relative=&quot;1&quot; as=&quot;geometry&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=&quot;e7&quot; value=&quot;:5432 (admin)&quot; style=&quot;edgeStyle=orthogonalEdgeStyle;rounded=1;dashed=1;fontSize=9;&quot; edge=&quot;1&quot; source=&quot;bastion&quot; target=&quot;aurora&quot; parent=&quot;1&quot;&gt;&lt;mxGeometry relative=&quot;1&quot; as=&quot;geometry&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=&quot;e8&quot; value=&quot;secrets&quot; style=&quot;edgeStyle=orthogonalEdgeStyle;rounded=1;dashed=1;fontSize=9;&quot; edge=&quot;1&quot; source=&quot;ecs&quot; target=&quot;ssm&quot; parent=&quot;1&quot;&gt;&lt;mxGeometry relative=&quot;1&quot; as=&quot;geometry&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=&quot;e9&quot; value=&quot;logs&quot; style=&quot;edgeStyle=orthogonalEdgeStyle;rounded=1;dashed=1;fontSize=9;&quot; edge=&quot;1&quot; source=&quot;ecs&quot; target=&quot;cw&quot; parent=&quot;1&quot;&gt;&lt;mxGeometry relative=&quot;1&quot; as=&quot;geometry&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=&quot;e10&quot; value=&quot;OAuth2 / JWT (RS256)&quot; style=&quot;edgeStyle=orthogonalEdgeStyle;rounded=1;dashed=1;fontSize=9;&quot; edge=&quot;1&quot; source=&quot;user&quot; target=&quot;auth0&quot; parent=&quot;1&quot;&gt;&lt;mxGeometry relative=&quot;1&quot; as=&quot;geometry&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=&quot;e11&quot; value=&quot;deploy dist/&quot; style=&quot;edgeStyle=orthogonalEdgeStyle;rounded=1;dashed=1;fontSize=9;&quot; edge=&quot;1&quot; source=&quot;cp_fe&quot; target=&quot;s3&quot; parent=&quot;1&quot;&gt;&lt;mxGeometry relative=&quot;1&quot; as=&quot;geometry&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=&quot;e12&quot; value=&quot;docker push&quot; style=&quot;edgeStyle=orthogonalEdgeStyle;rounded=1;dashed=1;fontSize=9;&quot; edge=&quot;1&quot; source=&quot;cp_be&quot; target=&quot;ecr&quot; parent=&quot;1&quot;&gt;&lt;mxGeometry relative=&quot;1&quot; as=&quot;geometry&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=&quot;e13&quot; style=&quot;edgeStyle=orthogonalEdgeStyle;rounded=1;dashed=1;&quot; edge=&quot;1&quot; source=&quot;github&quot; target=&quot;cp_be&quot; parent=&quot;1&quot;&gt;&lt;mxGeometry relative=&quot;1&quot; as=&quot;geometry&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=&quot;e14&quot; style=&quot;edgeStyle=orthogonalEdgeStyle;rounded=1;dashed=1;&quot; edge=&quot;1&quot; source=&quot;github&quot; target=&quot;cp_fe&quot; parent=&quot;1&quot;&gt;&lt;mxGeometry relative=&quot;1&quot; as=&quot;geometry&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=&quot;e15&quot; value=&quot;ECS deploy&quot; style=&quot;edgeStyle=orthogonalEdgeStyle;rounded=1;dashed=1;fontSize=9;&quot; edge=&quot;1&quot; source=&quot;cp_be&quot; target=&quot;ecs&quot; parent=&quot;1&quot;&gt;&lt;mxGeometry relative=&quot;1&quot; as=&quot;geometry&quot;&gt;&lt;Array as=&quot;points&quot;&gt;&lt;mxPoint x=&quot;250&quot; y=&quot;490&quot;/&gt;&lt;mxPoint x=&quot;250&quot; y=&quot;700&quot;/&gt;&lt;/Array&gt;&lt;/mxGeometry&gt;&lt;/mxCell&gt;&lt;/root&gt;&lt;/mxGraphModel&gt;&lt;/diagram&gt;&lt;/mxfile&gt;">
  <defs/>
  <g>
    <!-- Title -->
    <text x="600" y="25" fill="#333333" font-family="Helvetica" font-size="20" text-anchor="middle" font-weight="bold">AWS Infrastructure Architecture</text>

    <!-- User -->
    <g transform="translate(560,50)">
      <ellipse cx="20" cy="10" rx="10" ry="10" fill="#FFFFFF" stroke="#333333" stroke-width="1.5"/>
      <line x1="20" y1="20" x2="20" y2="35" stroke="#333333" stroke-width="1.5"/>
      <line x1="10" y1="26" x2="30" y2="26" stroke="#333333" stroke-width="1.5"/>
      <line x1="20" y1="35" x2="12" y2="48" stroke="#333333" stroke-width="1.5"/>
      <line x1="20" y1="35" x2="28" y2="48" stroke="#333333" stroke-width="1.5"/>
      <text x="20" y="63" fill="#333333" font-family="Helvetica" font-size="11" text-anchor="middle" font-weight="bold">User</text>
    </g>

    <!-- Auth0 -->
    <rect x="920" y="50" width="140" height="45" rx="8" fill="#F5F5F5" stroke="#999999" stroke-width="1.5"/>
    <text x="990" y="68" fill="#333333" font-family="Helvetica" font-size="13" text-anchor="middle" font-weight="bold">Auth0</text>
    <text x="990" y="83" fill="#666666" font-family="Helvetica" font-size="10" text-anchor="middle">JWT / OAuth2 / JWKS</text>

    <!-- Auth0 arrow from user -->
    <line x1="600" y1="65" x2="920" y2="65" stroke="#999999" stroke-width="1" stroke-dasharray="6,3"/>
    <polygon points="916,62 922,65 916,68" fill="#999999"/>
    <text x="760" y="58" fill="#999999" font-family="Helvetica" font-size="9" text-anchor="middle">OAuth2 / JWT (RS256)</text>

    <!-- CloudFront icon -->
    <g transform="translate(556,130)">
      <rect x="0" y="0" width="48" height="48" rx="8" fill="#8C4FFF" stroke="none"/>
      <text x="24" y="20" fill="#FFFFFF" font-family="Helvetica" font-size="8" text-anchor="middle" font-weight="bold">Cloud</text>
      <text x="24" y="32" fill="#FFFFFF" font-family="Helvetica" font-size="8" text-anchor="middle" font-weight="bold">Front</text>
    </g>
    <text x="580" y="193" fill="#333333" font-family="Helvetica" font-size="11" text-anchor="middle" font-weight="bold">CloudFront</text>
    <text x="580" y="207" fill="#555555" font-family="Helvetica" font-size="9" text-anchor="middle">CDN / HTTPS / SPA Error Handling</text>

    <!-- User to CloudFront arrow -->
    <line x1="580" y1="115" x2="580" y2="130" stroke="#333333" stroke-width="2"/>
    <polygon points="576,127 580,133 584,127" fill="#333333"/>
    <text x="595" y="124" fill="#333333" font-family="Helvetica" font-size="9">HTTPS</text>

    <!-- S3 icon -->
    <g transform="translate(146,240)">
      <rect x="0" y="0" width="48" height="48" rx="8" fill="#277116" stroke="none"/>
      <text x="24" y="30" fill="#FFFFFF" font-family="Helvetica" font-size="14" text-anchor="middle" font-weight="bold">S3</text>
    </g>
    <text x="170" y="303" fill="#333333" font-family="Helvetica" font-size="11" text-anchor="middle" font-weight="bold">S3 Bucket</text>
    <text x="170" y="317" fill="#555555" font-family="Helvetica" font-size="9" text-anchor="middle">React SPA (Static Files)</text>

    <!-- CloudFront to S3 arrow -->
    <path d="M 556,154 L 320,154 L 320,264 L 194,264" fill="none" stroke="#333333" stroke-width="1.5"/>
    <polygon points="198,261 192,264 198,267" fill="#333333"/>
    <text x="340" y="148" fill="#333333" font-family="Helvetica" font-size="9">/* (OAC SigV4)</text>

    <!-- VPC Box -->
    <rect x="340" y="220" width="830" height="580" rx="12" fill="none" stroke="#248814" stroke-width="2.5"/>
    <rect x="350" y="220" width="200" height="22" rx="4" fill="#E9F3E6" stroke="none"/>
    <g transform="translate(352,222)">
      <rect x="0" y="0" width="18" height="18" rx="2" fill="#248814" stroke="none"/>
      <text x="9" y="13" fill="#FFFFFF" font-family="Helvetica" font-size="8" text-anchor="middle" font-weight="bold">VPC</text>
    </g>
    <text x="378" y="236" fill="#248814" font-family="Helvetica" font-size="12" font-weight="bold">VPC 172.16.0.0/16</text>

    <!-- Public Subnet -->
    <rect x="370" y="260" width="360" height="140" rx="8" fill="#E9F3E6" stroke="#248814" stroke-width="1.5" fill-opacity="0.3"/>
    <text x="380" y="278" fill="#248814" font-family="Helvetica" font-size="10" font-weight="bold">Public Subnet 172.16.1.0/24 (ap-northeast-1a)</text>

    <!-- NAT Gateway icon -->
    <g transform="translate(390,300)">
      <rect x="0" y="0" width="44" height="44" rx="6" fill="#8C4FFF" stroke="none"/>
      <text x="22" y="18" fill="#FFFFFF" font-family="Helvetica" font-size="7" text-anchor="middle" font-weight="bold">NAT</text>
      <text x="22" y="30" fill="#FFFFFF" font-family="Helvetica" font-size="7" text-anchor="middle" font-weight="bold">GW</text>
    </g>
    <text x="412" y="358" fill="#333333" font-family="Helvetica" font-size="9" text-anchor="middle">NAT Gateway</text>
    <text x="412" y="370" fill="#555555" font-family="Helvetica" font-size="8" text-anchor="middle">(Elastic IP)</text>

    <!-- Internet Gateway icon -->
    <g transform="translate(520,300)">
      <rect x="0" y="0" width="44" height="44" rx="6" fill="#8C4FFF" stroke="none"/>
      <text x="22" y="18" fill="#FFFFFF" font-family="Helvetica" font-size="7" text-anchor="middle" font-weight="bold">IGW</text>
      <text x="22" y="30" fill="#FFFFFF" font-family="Helvetica" font-size="6" text-anchor="middle">Internet</text>
    </g>
    <text x="542" y="358" fill="#333333" font-family="Helvetica" font-size="9" text-anchor="middle">Internet GW</text>

    <!-- Bastion icon -->
    <g transform="translate(650,300)">
      <rect x="0" y="0" width="44" height="44" rx="6" fill="#ED7100" stroke="none"/>
      <text x="22" y="18" fill="#FFFFFF" font-family="Helvetica" font-size="7" text-anchor="middle" font-weight="bold">EC2</text>
      <text x="22" y="30" fill="#FFFFFF" font-family="Helvetica" font-size="6" text-anchor="middle">Bastion</text>
    </g>
    <text x="672" y="358" fill="#333333" font-family="Helvetica" font-size="9" text-anchor="middle">Bastion Host</text>
    <text x="672" y="370" fill="#555555" font-family="Helvetica" font-size="8" text-anchor="middle">(EC2)</text>

    <!-- Private Subnets -->
    <rect x="370" y="420" width="780" height="360" rx="8" fill="#EBF2FA" stroke="#147EBA" stroke-width="1.5" fill-opacity="0.3"/>
    <text x="380" y="438" fill="#147EBA" font-family="Helvetica" font-size="10" font-weight="bold">Private Subnets 172.16.2.0/24 (1a) &amp; 172.16.3.0/24 (1c)</text>

    <!-- ALB icon -->
    <g transform="translate(548,460)">
      <rect x="0" y="0" width="48" height="48" rx="8" fill="#8C4FFF" stroke="none"/>
      <text x="24" y="18" fill="#FFFFFF" font-family="Helvetica" font-size="7" text-anchor="middle" font-weight="bold">ALB</text>
      <text x="24" y="30" fill="#FFFFFF" font-family="Helvetica" font-size="6" text-anchor="middle">Internal</text>
    </g>
    <text x="572" y="523" fill="#333333" font-family="Helvetica" font-size="10" text-anchor="middle" font-weight="bold">ALB (Internal)</text>
    <text x="572" y="537" fill="#555555" font-family="Helvetica" font-size="9" text-anchor="middle">HTTP:80 / Rule: /api/*</text>

    <!-- CloudFront to ALB arrow -->
    <path d="M 604,154 L 750,154 L 750,400 L 572,400 L 572,460" fill="none" stroke="#333333" stroke-width="1.5"/>
    <polygon points="569,456 572,462 575,456" fill="#333333"/>
    <text x="765" y="300" fill="#333333" font-family="Helvetica" font-size="9" transform="rotate(90,765,300)">/api/* (VPC Origin)</text>

    <!-- ECS Fargate icon -->
    <g transform="translate(536,570)">
      <rect x="0" y="0" width="48" height="48" rx="8" fill="#ED7100" stroke="none"/>
      <text x="24" y="18" fill="#FFFFFF" font-family="Helvetica" font-size="7" text-anchor="middle" font-weight="bold">ECS</text>
      <text x="24" y="30" fill="#FFFFFF" font-family="Helvetica" font-size="6" text-anchor="middle">Fargate</text>
    </g>
    <text x="560" y="633" fill="#333333" font-family="Helvetica" font-size="10" text-anchor="middle" font-weight="bold">ECS Fargate</text>
    <text x="560" y="647" fill="#555555" font-family="Helvetica" font-size="9" text-anchor="middle">CPU:256 / Mem:512MB</text>
    <text x="560" y="661" fill="#555555" font-family="Helvetica" font-size="9" text-anchor="middle">NestJS API (:3000)</text>

    <!-- ALB to ECS arrow -->
    <line x1="572" y1="542" x2="560" y2="570" stroke="#333333" stroke-width="1.5"/>
    <polygon points="557,566 560,572 563,566" fill="#333333"/>
    <text x="580" y="555" fill="#333333" font-family="Helvetica" font-size="9">:3000</text>

    <!-- Aurora icon -->
    <g transform="translate(855,560)">
      <rect x="0" y="0" width="48" height="48" rx="8" fill="#C925D1" stroke="none"/>
      <text x="24" y="18" fill="#FFFFFF" font-family="Helvetica" font-size="6" text-anchor="middle" font-weight="bold">Aurora</text>
      <text x="24" y="30" fill="#FFFFFF" font-family="Helvetica" font-size="6" text-anchor="middle">PgSQL</text>
    </g>
    <text x="879" y="623" fill="#333333" font-family="Helvetica" font-size="10" text-anchor="middle" font-weight="bold">Aurora Serverless v2</text>
    <text x="879" y="637" fill="#555555" font-family="Helvetica" font-size="9" text-anchor="middle">PostgreSQL 16.6</text>
    <text x="879" y="651" fill="#555555" font-family="Helvetica" font-size="9" text-anchor="middle">0.0-1.0 ACU / Encrypted</text>

    <!-- ECS to Aurora arrow -->
    <line x1="584" y1="594" x2="855" y2="584" stroke="#333333" stroke-width="1.5"/>
    <polygon points="851,581 857,584 851,587" fill="#333333"/>
    <text x="720" y="582" fill="#333333" font-family="Helvetica" font-size="9">:5432 (SSL)</text>

    <!-- Bastion to Aurora arrow -->
    <path d="M 672,350 L 672,410 L 879,410 L 879,560" fill="none" stroke="#999999" stroke-width="1" stroke-dasharray="5,3"/>
    <polygon points="876,556 879,562 882,556" fill="#999999"/>
    <text x="790" y="405" fill="#999999" font-family="Helvetica" font-size="9">:5432 (admin)</text>

    <!-- ECR icon -->
    <g transform="translate(835,460)">
      <rect x="0" y="0" width="48" height="48" rx="8" fill="#ED7100" stroke="none"/>
      <text x="24" y="18" fill="#FFFFFF" font-family="Helvetica" font-size="8" text-anchor="middle" font-weight="bold">ECR</text>
      <text x="24" y="30" fill="#FFFFFF" font-family="Helvetica" font-size="6" text-anchor="middle">Registry</text>
    </g>
    <text x="859" y="523" fill="#333333" font-family="Helvetica" font-size="10" text-anchor="middle" font-weight="bold">ECR</text>
    <text x="859" y="537" fill="#555555" font-family="Helvetica" font-size="9" text-anchor="middle">Container Registry</text>

    <!-- ECR to ECS arrow -->
    <path d="M 835,490 L 750,490 L 750,594 L 584,594" fill="none" stroke="#999999" stroke-width="1" stroke-dasharray="5,3"/>
    <polygon points="588,591 582,594 588,597" fill="#999999"/>
    <text x="763" y="545" fill="#999999" font-family="Helvetica" font-size="9">image pull</text>

    <!-- SSM icon -->
    <g transform="translate(405,680)">
      <rect x="0" y="0" width="48" height="48" rx="8" fill="#E7157B" stroke="none"/>
      <text x="24" y="18" fill="#FFFFFF" font-family="Helvetica" font-size="7" text-anchor="middle" font-weight="bold">SSM</text>
      <text x="24" y="30" fill="#FFFFFF" font-family="Helvetica" font-size="6" text-anchor="middle">Params</text>
    </g>
    <text x="429" y="743" fill="#333333" font-family="Helvetica" font-size="9" text-anchor="middle" font-weight="bold">SSM Parameter Store</text>
    <text x="429" y="756" fill="#555555" font-family="Helvetica" font-size="8" text-anchor="middle">SecureString (DB URL)</text>

    <!-- ECS to SSM arrow -->
    <path d="M 536,600 L 450,600 L 450,680" fill="none" stroke="#999999" stroke-width="1" stroke-dasharray="5,3"/>
    <polygon points="447,676 450,682 453,676" fill="#999999"/>
    <text x="475" y="640" fill="#999999" font-family="Helvetica" font-size="9">secrets</text>

    <!-- CloudWatch icon -->
    <g transform="translate(605,680)">
      <rect x="0" y="0" width="48" height="48" rx="8" fill="#E7157B" stroke="none"/>
      <text x="24" y="18" fill="#FFFFFF" font-family="Helvetica" font-size="6" text-anchor="middle" font-weight="bold">Cloud</text>
      <text x="24" y="28" fill="#FFFFFF" font-family="Helvetica" font-size="6" text-anchor="middle" font-weight="bold">Watch</text>
    </g>
    <text x="629" y="743" fill="#333333" font-family="Helvetica" font-size="9" text-anchor="middle" font-weight="bold">CloudWatch Logs</text>
    <text x="629" y="756" fill="#555555" font-family="Helvetica" font-size="8" text-anchor="middle">Retention: 7 days</text>

    <!-- ECS to CloudWatch arrow -->
    <path d="M 584,600 L 629,600 L 629,680" fill="none" stroke="#999999" stroke-width="1" stroke-dasharray="5,3"/>
    <polygon points="626,676 629,682 632,676" fill="#999999"/>
    <text x="620" y="640" fill="#999999" font-family="Helvetica" font-size="9">logs</text>

    <!-- VPC Endpoints icon -->
    <g transform="translate(1010,460)">
      <rect x="0" y="0" width="48" height="48" rx="8" fill="#8C4FFF" stroke="none"/>
      <text x="24" y="18" fill="#FFFFFF" font-family="Helvetica" font-size="6" text-anchor="middle" font-weight="bold">VPC</text>
      <text x="24" y="28" fill="#FFFFFF" font-family="Helvetica" font-size="6" text-anchor="middle" font-weight="bold">Endpt</text>
    </g>
    <text x="1034" y="523" fill="#333333" font-family="Helvetica" font-size="9" text-anchor="middle" font-weight="bold">VPC Endpoints</text>
    <text x="1034" y="536" fill="#555555" font-family="Helvetica" font-size="8" text-anchor="middle">SSM, ECR, Logs</text>

    <!-- CI/CD Section -->
    <rect x="15" y="340" width="170" height="300" rx="8" fill="none" stroke="#C7131F" stroke-width="1.5" stroke-dasharray="5,3"/>
    <text x="100" y="358" fill="#C7131F" font-family="Helvetica" font-size="11" text-anchor="middle" font-weight="bold">CI/CD</text>

    <!-- CodePipeline Frontend icon -->
    <g transform="translate(58,370)">
      <rect x="0" y="0" width="44" height="44" rx="6" fill="#C7131F" stroke="none"/>
      <text x="22" y="16" fill="#FFFFFF" font-family="Helvetica" font-size="6" text-anchor="middle" font-weight="bold">Code</text>
      <text x="22" y="26" fill="#FFFFFF" font-family="Helvetica" font-size="6" text-anchor="middle" font-weight="bold">Pipeline</text>
      <text x="22" y="38" fill="#FFFFFF" font-family="Helvetica" font-size="6" text-anchor="middle">(FE)</text>
    </g>
    <text x="80" y="428" fill="#333333" font-family="Helvetica" font-size="9" text-anchor="middle" font-weight="bold">CodePipeline</text>
    <text x="80" y="440" fill="#555555" font-family="Helvetica" font-size="8" text-anchor="middle">(Frontend) Source&#x2192;Build</text>

    <!-- CodePipeline Backend icon -->
    <g transform="translate(58,465)">
      <rect x="0" y="0" width="44" height="44" rx="6" fill="#C7131F" stroke="none"/>
      <text x="22" y="16" fill="#FFFFFF" font-family="Helvetica" font-size="6" text-anchor="middle" font-weight="bold">Code</text>
      <text x="22" y="26" fill="#FFFFFF" font-family="Helvetica" font-size="6" text-anchor="middle" font-weight="bold">Pipeline</text>
      <text x="22" y="38" fill="#FFFFFF" font-family="Helvetica" font-size="6" text-anchor="middle">(BE)</text>
    </g>
    <text x="80" y="523" fill="#333333" font-family="Helvetica" font-size="9" text-anchor="middle" font-weight="bold">CodePipeline</text>
    <text x="80" y="535" fill="#555555" font-family="Helvetica" font-size="8" text-anchor="middle">(Backend) Src&#x2192;Build&#x2192;Deploy</text>

    <!-- GitHub -->
    <rect x="30" y="555" width="140" height="50" rx="6" fill="#24292E" stroke="#24292E" stroke-width="1.5"/>
    <text x="100" y="575" fill="#FFFFFF" font-family="Helvetica" font-size="11" text-anchor="middle" font-weight="bold">GitHub</text>
    <text x="100" y="592" fill="#CCCCCC" font-family="Helvetica" font-size="9" text-anchor="middle">(CodeStar Connection)</text>

    <!-- GitHub to Pipelines arrows -->
    <line x1="100" y1="555" x2="100" y2="540" stroke="#999999" stroke-width="1" stroke-dasharray="4,3"/>
    <polygon points="97,543 100,537 103,543" fill="#999999"/>
    <line x1="80" y1="555" x2="80" y2="445" stroke="#999999" stroke-width="1" stroke-dasharray="4,3"/>

    <!-- Pipeline to S3 -->
    <path d="M 170,392 L 220,392 L 220,264 L 194,264" fill="none" stroke="#C7131F" stroke-width="1" stroke-dasharray="5,3"/>
    <polygon points="198,261 192,264 198,267" fill="#C7131F"/>
    <text x="233" y="330" fill="#C7131F" font-family="Helvetica" font-size="8" transform="rotate(-90,233,330)">deploy dist/</text>

    <!-- Pipeline to ECR -->
    <path d="M 170,487 L 300,487 L 300,484 L 835,484" fill="none" stroke="#C7131F" stroke-width="1" stroke-dasharray="5,3"/>
    <polygon points="831,481 837,484 831,487" fill="#C7131F"/>
    <text x="500" y="477" fill="#C7131F" font-family="Helvetica" font-size="8">docker push</text>

    <!-- Security Groups Legend -->
    <rect x="15" y="830" width="550" height="30" rx="6" fill="#FAFAFA" stroke="#CCCCCC" stroke-width="1"/>
    <text x="25" y="848" fill="#333333" font-family="Helvetica" font-size="9" font-weight="bold">Security Groups:</text>
    <text x="120" y="848" fill="#555555" font-family="Helvetica" font-size="9">CF VPC Origin SG &#x2192; ALB SG (HTTP:80) &#x2192; ECS SG (:3000) &#x2192; DB SG (:5432) / Bastion SG &#x2192; DB SG</text>

    <!-- Region Label -->
    <text x="700" y="875" fill="#888888" font-family="Helvetica" font-size="11" font-style="italic">Region: ap-northeast-1 (Tokyo)</text>

    <!-- Legend -->
    <rect x="580" y="830" width="580" height="60" rx="6" fill="#FAFAFA" stroke="#CCCCCC" stroke-width="1"/>
    <rect x="595" y="842" width="24" height="14" rx="3" fill="#8C4FFF" stroke="none"/>
    <text x="624" y="854" fill="#555555" font-family="Helvetica" font-size="9">Networking</text>
    <rect x="700" y="842" width="24" height="14" rx="3" fill="#ED7100" stroke="none"/>
    <text x="729" y="854" fill="#555555" font-family="Helvetica" font-size="9">Compute</text>
    <rect x="790" y="842" width="24" height="14" rx="3" fill="#C925D1" stroke="none"/>
    <text x="819" y="854" fill="#555555" font-family="Helvetica" font-size="9">Database</text>
    <rect x="885" y="842" width="24" height="14" rx="3" fill="#E7157B" stroke="none"/>
    <text x="914" y="854" fill="#555555" font-family="Helvetica" font-size="9">Management</text>
    <rect x="990" y="842" width="24" height="14" rx="3" fill="#C7131F" stroke="none"/>
    <text x="1019" y="854" fill="#555555" font-family="Helvetica" font-size="9">Developer Tools</text>
    <line x1="595" y1="868" x2="625" y2="868" stroke="#333333" stroke-width="1.5"/>
    <text x="630" y="872" fill="#555555" font-family="Helvetica" font-size="9">Data Flow</text>
    <line x1="700" y1="868" x2="730" y2="868" stroke="#999999" stroke-width="1" stroke-dasharray="5,3"/>
    <text x="735" y="872" fill="#555555" font-family="Helvetica" font-size="9">Config / Deploy / Auxiliary</text>
    <text x="900" y="872" fill="#888888" font-family="Helvetica" font-size="8" font-style="italic">* Icon colors follow AWS Architecture Icon standards</text>
  </g>
</svg>