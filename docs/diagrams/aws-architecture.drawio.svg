<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" width="1200" height="920" viewBox="-0.5 -0.5 1200 920" content="&lt;mxfile host=&quot;app.diagrams.net&quot;&gt;&lt;diagram name=&quot;AWS Architecture&quot; id=&quot;aws-arch&quot;&gt;&lt;mxGraphModel dx=&quot;1200&quot; dy=&quot;920&quot; grid=&quot;1&quot; gridSize=&quot;10&quot; guides=&quot;1&quot; tooltips=&quot;1&quot; connect=&quot;1&quot; arrows=&quot;1&quot; fold=&quot;1&quot; page=&quot;1&quot; pageScale=&quot;1&quot; pageWidth=&quot;1200&quot; pageHeight=&quot;920&quot; math=&quot;0&quot; shadow=&quot;0&quot;&gt;&lt;root&gt;&lt;mxCell id=&quot;0&quot;/&gt;&lt;mxCell id=&quot;1&quot; parent=&quot;0&quot;/&gt;&lt;mxCell id=&quot;title&quot; value=&quot;AWS Infrastructure Architecture&quot; style=&quot;text;html=1;fontSize=20;fontStyle=1;fillColor=none;align=center;verticalAlign=middle;&quot; vertex=&quot;1&quot; parent=&quot;1&quot;&gt;&lt;mxGeometry x=&quot;350&quot; y=&quot;10&quot; width=&quot;500&quot; height=&quot;30&quot; as=&quot;geometry&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=&quot;user&quot; value=&quot;User&quot; style=&quot;shape=actor;whiteSpace=wrap;html=1;&quot; vertex=&quot;1&quot; parent=&quot;1&quot;&gt;&lt;mxGeometry x=&quot;560&quot; y=&quot;50&quot; width=&quot;40&quot; height=&quot;40&quot; as=&quot;geometry&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=&quot;auth0&quot; value=&quot;Auth0&quot; style=&quot;rounded=1;whiteSpace=wrap;html=1;fillColor=#f0f0f0;&quot; vertex=&quot;1&quot; parent=&quot;1&quot;&gt;&lt;mxGeometry x=&quot;950&quot; y=&quot;55&quot; width=&quot;120&quot; height=&quot;40&quot; as=&quot;geometry&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=&quot;cf&quot; value=&quot;CloudFront&quot; style=&quot;rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;&quot; vertex=&quot;1&quot; parent=&quot;1&quot;&gt;&lt;mxGeometry x=&quot;490&quot; y=&quot;130&quot; width=&quot;180&quot; height=&quot;50&quot; as=&quot;geometry&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=&quot;s3&quot; value=&quot;S3 Bucket (React SPA)&quot; style=&quot;rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;&quot; vertex=&quot;1&quot; parent=&quot;1&quot;&gt;&lt;mxGeometry x=&quot;100&quot; y=&quot;240&quot; width=&quot;180&quot; height=&quot;50&quot; as=&quot;geometry&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=&quot;vpc&quot; value=&quot;VPC 172.16.0.0/16&quot; style=&quot;rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;verticalAlign=top;fontSize=12;fontStyle=1;&quot; vertex=&quot;1&quot; parent=&quot;1&quot;&gt;&lt;mxGeometry x=&quot;350&quot; y=&quot;230&quot; width=&quot;800&quot; height=&quot;540&quot; as=&quot;geometry&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=&quot;pub_sub&quot; value=&quot;Public Subnet 172.16.1.0/24 (ap-northeast-1a)&quot; style=&quot;rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;verticalAlign=top;fontSize=11;&quot; vertex=&quot;1&quot; parent=&quot;1&quot;&gt;&lt;mxGeometry x=&quot;370&quot; y=&quot;260&quot; width=&quot;340&quot; height=&quot;130&quot; as=&quot;geometry&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=&quot;priv_sub&quot; value=&quot;Private Subnets 172.16.2.0/24 (1a) &amp;amp; 172.16.3.0/24 (1c)&quot; style=&quot;rounded=1;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;verticalAlign=top;fontSize=11;&quot; vertex=&quot;1&quot; parent=&quot;1&quot;&gt;&lt;mxGeometry x=&quot;370&quot; y=&quot;410&quot; width=&quot;760&quot; height=&quot;340&quot; as=&quot;geometry&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=&quot;nat&quot; value=&quot;NAT Gateway&amp;#xa;(EIP)&quot; style=&quot;rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;fontSize=10;&quot; vertex=&quot;1&quot; parent=&quot;1&quot;&gt;&lt;mxGeometry x=&quot;400&quot; y=&quot;300&quot; width=&quot;100&quot; height=&quot;50&quot; as=&quot;geometry&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=&quot;igw&quot; value=&quot;Internet&amp;#xa;Gateway&quot; style=&quot;rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;fontSize=10;&quot; vertex=&quot;1&quot; parent=&quot;1&quot;&gt;&lt;mxGeometry x=&quot;520&quot; y=&quot;300&quot; width=&quot;100&quot; height=&quot;50&quot; as=&quot;geometry&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=&quot;bastion&quot; value=&quot;Bastion&amp;#xa;Host (EC2)&quot; style=&quot;rounded=1;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;fontSize=10;&quot; vertex=&quot;1&quot; parent=&quot;1&quot;&gt;&lt;mxGeometry x=&quot;640&quot; y=&quot;300&quot; width=&quot;100&quot; height=&quot;50&quot; as=&quot;geometry&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=&quot;alb&quot; value=&quot;ALB (Internal)&amp;#xa;HTTP:80&amp;#xa;Rule: /api/*&quot; style=&quot;rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;fontSize=10;&quot; vertex=&quot;1&quot; parent=&quot;1&quot;&gt;&lt;mxGeometry x=&quot;510&quot; y=&quot;450&quot; width=&quot;140&quot; height=&quot;60&quot; as=&quot;geometry&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=&quot;ecs&quot; value=&quot;ECS Fargate&amp;#xa;CPU:256 / Mem:512MB&amp;#xa;NestJS API (:3000)&amp;#xa;Docker Image from ECR&quot; style=&quot;rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;fontSize=10;&quot; vertex=&quot;1&quot; parent=&quot;1&quot;&gt;&lt;mxGeometry x=&quot;490&quot; y=&quot;550&quot; width=&quot;180&quot; height=&quot;80&quot; as=&quot;geometry&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=&quot;aurora&quot; value=&quot;Aurora Serverless v2&amp;#xa;PostgreSQL 16.6&amp;#xa;0.0-1.0 ACU&amp;#xa;Encrypted&quot; style=&quot;shape=cylinder3;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;fontSize=10;size=10;&quot; vertex=&quot;1&quot; parent=&quot;1&quot;&gt;&lt;mxGeometry x=&quot;810&quot; y=&quot;535&quot; width=&quot;150&quot; height=&quot;100&quot; as=&quot;geometry&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=&quot;ecr&quot; value=&quot;ECR&amp;#xa;Container&amp;#xa;Registry&quot; style=&quot;rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;fontSize=10;&quot; vertex=&quot;1&quot; parent=&quot;1&quot;&gt;&lt;mxGeometry x=&quot;810&quot; y=&quot;450&quot; width=&quot;100&quot; height=&quot;55&quot; as=&quot;geometry&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=&quot;ssm&quot; value=&quot;SSM Parameter Store&amp;#xa;(SecureString)&amp;#xa;DB Connection&quot; style=&quot;rounded=1;whiteSpace=wrap;html=1;fillColor=#f5f5f5;strokeColor=#666666;fontSize=10;&quot; vertex=&quot;1&quot; parent=&quot;1&quot;&gt;&lt;mxGeometry x=&quot;390&quot; y=&quot;660&quot; width=&quot;140&quot; height=&quot;60&quot; as=&quot;geometry&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=&quot;cw&quot; value=&quot;CloudWatch Logs&amp;#xa;(Retention: 7d)&quot; style=&quot;rounded=1;whiteSpace=wrap;html=1;fillColor=#f5f5f5;strokeColor=#666666;fontSize=10;&quot; vertex=&quot;1&quot; parent=&quot;1&quot;&gt;&lt;mxGeometry x=&quot;560&quot; y=&quot;660&quot; width=&quot;140&quot; height=&quot;50&quot; as=&quot;geometry&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=&quot;vpce&quot; value=&quot;VPC Endpoints&amp;#xa;(SSM, ECR, Logs)&quot; style=&quot;rounded=1;whiteSpace=wrap;html=1;fillColor=#f5f5f5;strokeColor=#666666;fontSize=10;&quot; vertex=&quot;1&quot; parent=&quot;1&quot;&gt;&lt;mxGeometry x=&quot;980&quot; y=&quot;450&quot; width=&quot;130&quot; height=&quot;50&quot; as=&quot;geometry&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=&quot;cp_be&quot; value=&quot;CodePipeline&amp;#xa;(Backend)&amp;#xa;Source→Build→Deploy&quot; style=&quot;rounded=1;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;fontSize=10;&quot; vertex=&quot;1&quot; parent=&quot;1&quot;&gt;&lt;mxGeometry x=&quot;20&quot; y=&quot;460&quot; width=&quot;140&quot; height=&quot;60&quot; as=&quot;geometry&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=&quot;cp_fe&quot; value=&quot;CodePipeline&amp;#xa;(Frontend)&amp;#xa;Source→Build&quot; style=&quot;rounded=1;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;fontSize=10;&quot; vertex=&quot;1&quot; parent=&quot;1&quot;&gt;&lt;mxGeometry x=&quot;20&quot; y=&quot;370&quot; width=&quot;140&quot; height=&quot;55&quot; as=&quot;geometry&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=&quot;github&quot; value=&quot;GitHub&amp;#xa;(CodeStar Connection)&quot; style=&quot;rounded=1;whiteSpace=wrap;html=1;fillColor=#f5f5f5;strokeColor=#333333;fontSize=10;&quot; vertex=&quot;1&quot; parent=&quot;1&quot;&gt;&lt;mxGeometry x=&quot;20&quot; y=&quot;560&quot; width=&quot;140&quot; height=&quot;50&quot; as=&quot;geometry&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=&quot;sg_label&quot; value=&quot;Security Groups:&amp;#xa;CF VPC Origin SG → ALB SG → ECS SG → DB SG&amp;#xa;Bastion SG → DB SG&quot; style=&quot;text;html=1;fontSize=10;fillColor=none;align=left;verticalAlign=top;whiteSpace=wrap;rounded=1;strokeColor=#999999;dashed=1;&quot; vertex=&quot;1&quot; parent=&quot;1&quot;&gt;&lt;mxGeometry x=&quot;20&quot; y=&quot;830&quot; width=&quot;400&quot; height=&quot;50&quot; as=&quot;geometry&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=&quot;region_label&quot; value=&quot;Region: ap-northeast-1&quot; style=&quot;text;html=1;fontSize=11;fillColor=none;align=left;fontStyle=2;&quot; vertex=&quot;1&quot; parent=&quot;1&quot;&gt;&lt;mxGeometry x=&quot;20&quot; y=&quot;890&quot; width=&quot;200&quot; height=&quot;20&quot; as=&quot;geometry&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=&quot;e1&quot; style=&quot;edgeStyle=orthogonalEdgeStyle;rounded=1;&quot; edge=&quot;1&quot; source=&quot;user&quot; target=&quot;cf&quot; parent=&quot;1&quot;&gt;&lt;mxGeometry relative=&quot;1&quot; as=&quot;geometry&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=&quot;e1l&quot; value=&quot;HTTPS&quot; style=&quot;edgeLabel;html=1;fontSize=9;&quot; vertex=&quot;1&quot; connectable=&quot;0&quot; parent=&quot;e1&quot;&gt;&lt;mxGeometry x=&quot;-0.2&quot; relative=&quot;1&quot; as=&quot;geometry&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=&quot;e2&quot; style=&quot;edgeStyle=orthogonalEdgeStyle;rounded=1;&quot; edge=&quot;1&quot; source=&quot;cf&quot; target=&quot;s3&quot; parent=&quot;1&quot;&gt;&lt;mxGeometry relative=&quot;1&quot; as=&quot;geometry&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=&quot;e2l&quot; value=&quot;/* (OAC)&quot; style=&quot;edgeLabel;html=1;fontSize=9;&quot; vertex=&quot;1&quot; connectable=&quot;0&quot; parent=&quot;e2&quot;&gt;&lt;mxGeometry x=&quot;-0.2&quot; relative=&quot;1&quot; as=&quot;geometry&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=&quot;e3&quot; style=&quot;edgeStyle=orthogonalEdgeStyle;rounded=1;&quot; edge=&quot;1&quot; source=&quot;cf&quot; target=&quot;alb&quot; parent=&quot;1&quot;&gt;&lt;mxGeometry relative=&quot;1&quot; as=&quot;geometry&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=&quot;e3l&quot; value=&quot;/api/* (VPC Origin)&quot; style=&quot;edgeLabel;html=1;fontSize=9;&quot; vertex=&quot;1&quot; connectable=&quot;0&quot; parent=&quot;e3&quot;&gt;&lt;mxGeometry x=&quot;-0.2&quot; relative=&quot;1&quot; as=&quot;geometry&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=&quot;e4&quot; style=&quot;edgeStyle=orthogonalEdgeStyle;rounded=1;&quot; edge=&quot;1&quot; source=&quot;alb&quot; target=&quot;ecs&quot; parent=&quot;1&quot;&gt;&lt;mxGeometry relative=&quot;1&quot; as=&quot;geometry&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=&quot;e4l&quot; value=&quot;:3000&quot; style=&quot;edgeLabel;html=1;fontSize=9;&quot; vertex=&quot;1&quot; connectable=&quot;0&quot; parent=&quot;e4&quot;&gt;&lt;mxGeometry x=&quot;-0.2&quot; relative=&quot;1&quot; as=&quot;geometry&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=&quot;e5&quot; style=&quot;edgeStyle=orthogonalEdgeStyle;rounded=1;&quot; edge=&quot;1&quot; source=&quot;ecs&quot; target=&quot;aurora&quot; parent=&quot;1&quot;&gt;&lt;mxGeometry relative=&quot;1&quot; as=&quot;geometry&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=&quot;e5l&quot; value=&quot;:5432 (SSL)&quot; style=&quot;edgeLabel;html=1;fontSize=9;&quot; vertex=&quot;1&quot; connectable=&quot;0&quot; parent=&quot;e5&quot;&gt;&lt;mxGeometry x=&quot;-0.2&quot; relative=&quot;1&quot; as=&quot;geometry&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=&quot;e6&quot; style=&quot;edgeStyle=orthogonalEdgeStyle;rounded=1;dashed=1;&quot; edge=&quot;1&quot; source=&quot;ecr&quot; target=&quot;ecs&quot; parent=&quot;1&quot;&gt;&lt;mxGeometry relative=&quot;1&quot; as=&quot;geometry&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=&quot;e6l&quot; value=&quot;image pull&quot; style=&quot;edgeLabel;html=1;fontSize=9;&quot; vertex=&quot;1&quot; connectable=&quot;0&quot; parent=&quot;e6&quot;&gt;&lt;mxGeometry x=&quot;-0.2&quot; relative=&quot;1&quot; as=&quot;geometry&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=&quot;e7&quot; style=&quot;edgeStyle=orthogonalEdgeStyle;rounded=1;dashed=1;&quot; edge=&quot;1&quot; source=&quot;bastion&quot; target=&quot;aurora&quot; parent=&quot;1&quot;&gt;&lt;mxGeometry relative=&quot;1&quot; as=&quot;geometry&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=&quot;e7l&quot; value=&quot;:5432&quot; style=&quot;edgeLabel;html=1;fontSize=9;&quot; vertex=&quot;1&quot; connectable=&quot;0&quot; parent=&quot;e7&quot;&gt;&lt;mxGeometry x=&quot;-0.2&quot; relative=&quot;1&quot; as=&quot;geometry&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=&quot;e8&quot; style=&quot;edgeStyle=orthogonalEdgeStyle;rounded=1;dashed=1;&quot; edge=&quot;1&quot; source=&quot;ecs&quot; target=&quot;ssm&quot; parent=&quot;1&quot;&gt;&lt;mxGeometry relative=&quot;1&quot; as=&quot;geometry&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=&quot;e8l&quot; value=&quot;secrets&quot; style=&quot;edgeLabel;html=1;fontSize=9;&quot; vertex=&quot;1&quot; connectable=&quot;0&quot; parent=&quot;e8&quot;&gt;&lt;mxGeometry x=&quot;-0.2&quot; relative=&quot;1&quot; as=&quot;geometry&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=&quot;e9&quot; style=&quot;edgeStyle=orthogonalEdgeStyle;rounded=1;dashed=1;&quot; edge=&quot;1&quot; source=&quot;ecs&quot; target=&quot;cw&quot; parent=&quot;1&quot;&gt;&lt;mxGeometry relative=&quot;1&quot; as=&quot;geometry&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=&quot;e9l&quot; value=&quot;logs&quot; style=&quot;edgeLabel;html=1;fontSize=9;&quot; vertex=&quot;1&quot; connectable=&quot;0&quot; parent=&quot;e9&quot;&gt;&lt;mxGeometry x=&quot;-0.2&quot; relative=&quot;1&quot; as=&quot;geometry&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=&quot;e10&quot; style=&quot;edgeStyle=orthogonalEdgeStyle;rounded=1;dashed=1;&quot; edge=&quot;1&quot; source=&quot;user&quot; target=&quot;auth0&quot; parent=&quot;1&quot;&gt;&lt;mxGeometry relative=&quot;1&quot; as=&quot;geometry&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=&quot;e10l&quot; value=&quot;OAuth2 / JWT&quot; style=&quot;edgeLabel;html=1;fontSize=9;&quot; vertex=&quot;1&quot; connectable=&quot;0&quot; parent=&quot;e10&quot;&gt;&lt;mxGeometry x=&quot;-0.2&quot; relative=&quot;1&quot; as=&quot;geometry&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=&quot;e11&quot; style=&quot;edgeStyle=orthogonalEdgeStyle;rounded=1;dashed=1;&quot; edge=&quot;1&quot; source=&quot;cp_fe&quot; target=&quot;s3&quot; parent=&quot;1&quot;&gt;&lt;mxGeometry relative=&quot;1&quot; as=&quot;geometry&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=&quot;e11l&quot; value=&quot;deploy dist/&quot; style=&quot;edgeLabel;html=1;fontSize=9;&quot; vertex=&quot;1&quot; connectable=&quot;0&quot; parent=&quot;e11&quot;&gt;&lt;mxGeometry x=&quot;-0.2&quot; relative=&quot;1&quot; as=&quot;geometry&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=&quot;e12&quot; style=&quot;edgeStyle=orthogonalEdgeStyle;rounded=1;dashed=1;&quot; edge=&quot;1&quot; source=&quot;cp_be&quot; target=&quot;ecr&quot; parent=&quot;1&quot;&gt;&lt;mxGeometry relative=&quot;1&quot; as=&quot;geometry&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=&quot;e12l&quot; value=&quot;docker push&quot; style=&quot;edgeLabel;html=1;fontSize=9;&quot; vertex=&quot;1&quot; connectable=&quot;0&quot; parent=&quot;e12&quot;&gt;&lt;mxGeometry x=&quot;-0.2&quot; relative=&quot;1&quot; as=&quot;geometry&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=&quot;e13&quot; style=&quot;edgeStyle=orthogonalEdgeStyle;rounded=1;dashed=1;&quot; edge=&quot;1&quot; source=&quot;github&quot; target=&quot;cp_be&quot; parent=&quot;1&quot;&gt;&lt;mxGeometry relative=&quot;1&quot; as=&quot;geometry&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=&quot;e14&quot; style=&quot;edgeStyle=orthogonalEdgeStyle;rounded=1;dashed=1;&quot; edge=&quot;1&quot; source=&quot;github&quot; target=&quot;cp_fe&quot; parent=&quot;1&quot;&gt;&lt;mxGeometry relative=&quot;1&quot; as=&quot;geometry&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=&quot;e15&quot; style=&quot;edgeStyle=orthogonalEdgeStyle;rounded=1;dashed=1;&quot; edge=&quot;1&quot; source=&quot;cp_be&quot; target=&quot;ecs&quot; parent=&quot;1&quot;&gt;&lt;mxGeometry relative=&quot;1&quot; as=&quot;geometry&quot;&gt;&lt;Array as=&quot;points&quot;&gt;&lt;mxPoint x=&quot;250&quot; y=&quot;490&quot;/&gt;&lt;mxPoint x=&quot;250&quot; y=&quot;590&quot;/&gt;&lt;/Array&gt;&lt;/mxGeometry&gt;&lt;/mxCell&gt;&lt;mxCell id=&quot;e15l&quot; value=&quot;ECS deploy&quot; style=&quot;edgeLabel;html=1;fontSize=9;&quot; vertex=&quot;1&quot; connectable=&quot;0&quot; parent=&quot;e15&quot;&gt;&lt;mxGeometry x=&quot;-0.2&quot; relative=&quot;1&quot; as=&quot;geometry&quot;/&gt;&lt;/mxCell&gt;&lt;/root&gt;&lt;/mxGraphModel&gt;&lt;/diagram&gt;&lt;/mxfile&gt;">
  <defs/>
  <g>
    <!-- Title -->
    <text x="600" y="25" fill="#333333" font-family="Helvetica" font-size="20" text-anchor="middle" font-weight="bold">AWS Infrastructure Architecture</text>

    <!-- User -->
    <g transform="translate(560,50)">
      <ellipse cx="20" cy="10" rx="10" ry="10" fill="#FFFFFF" stroke="#333333" stroke-width="1.5"/>
      <line x1="20" y1="20" x2="20" y2="35" stroke="#333333" stroke-width="1.5"/>
      <line x1="10" y1="26" x2="30" y2="26" stroke="#333333" stroke-width="1.5"/>
      <line x1="20" y1="35" x2="12" y2="48" stroke="#333333" stroke-width="1.5"/>
      <line x1="20" y1="35" x2="28" y2="48" stroke="#333333" stroke-width="1.5"/>
      <text x="20" y="63" fill="#333333" font-family="Helvetica" font-size="11" text-anchor="middle" font-weight="bold">User</text>
    </g>

    <!-- Auth0 -->
    <rect x="920" y="50" width="140" height="45" rx="8" fill="#F5F5F5" stroke="#999999" stroke-width="1.5"/>
    <text x="990" y="68" fill="#333333" font-family="Helvetica" font-size="13" text-anchor="middle" font-weight="bold">Auth0</text>
    <text x="990" y="83" fill="#666666" font-family="Helvetica" font-size="10" text-anchor="middle">JWT / OAuth2 / JWKS</text>

    <!-- Auth0 arrow from user -->
    <line x1="600" y1="65" x2="920" y2="65" stroke="#999999" stroke-width="1" stroke-dasharray="6,3"/>
    <polygon points="916,62 922,65 916,68" fill="#999999"/>
    <text x="760" y="58" fill="#999999" font-family="Helvetica" font-size="9" text-anchor="middle">OAuth2 / JWT (RS256)</text>

    <!-- CloudFront -->
    <rect x="460" y="130" width="240" height="55" rx="10" fill="#D5E8D4" stroke="#82B366" stroke-width="2"/>
    <text x="580" y="152" fill="#333333" font-family="Helvetica" font-size="14" text-anchor="middle" font-weight="bold">CloudFront</text>
    <text x="580" y="172" fill="#555555" font-family="Helvetica" font-size="10" text-anchor="middle">CDN / HTTPS Redirect / SPA Error Handling</text>

    <!-- User to CloudFront arrow -->
    <line x1="580" y1="115" x2="580" y2="130" stroke="#333333" stroke-width="2"/>
    <polygon points="576,127 580,133 584,127" fill="#333333"/>
    <text x="595" y="124" fill="#333333" font-family="Helvetica" font-size="9">HTTPS</text>

    <!-- S3 -->
    <rect x="70" y="230" width="200" height="55" rx="10" fill="#DAE8FC" stroke="#6C8EBF" stroke-width="2"/>
    <text x="170" y="252" fill="#333333" font-family="Helvetica" font-size="13" text-anchor="middle" font-weight="bold">S3 Bucket</text>
    <text x="170" y="270" fill="#555555" font-family="Helvetica" font-size="10" text-anchor="middle">React SPA (Static Files)</text>

    <!-- CloudFront to S3 arrow -->
    <path d="M 460,165 L 320,165 L 320,255 L 270,255" fill="none" stroke="#333333" stroke-width="1.5"/>
    <polygon points="274,252 268,255 274,258" fill="#333333"/>
    <text x="340" y="158" fill="#333333" font-family="Helvetica" font-size="9">/* (OAC SigV4)</text>

    <!-- VPC Box -->
    <rect x="340" y="220" width="830" height="580" rx="12" fill="none" stroke="#D6B656" stroke-width="2.5" stroke-dasharray="8,4"/>
    <rect x="350" y="220" width="200" height="22" rx="4" fill="#FFF2CC" stroke="none"/>
    <text x="360" y="236" fill="#8B7000" font-family="Helvetica" font-size="12" font-weight="bold">VPC 172.16.0.0/16</text>

    <!-- Public Subnet -->
    <rect x="370" y="260" width="360" height="140" rx="8" fill="none" stroke="#82B366" stroke-width="1.5" stroke-dasharray="5,3"/>
    <text x="380" y="278" fill="#5B8C3E" font-family="Helvetica" font-size="10" font-weight="bold">Public Subnet 172.16.1.0/24 (ap-northeast-1a)</text>

    <!-- NAT Gateway -->
    <rect x="390" y="300" width="110" height="50" rx="6" fill="#D5E8D4" stroke="#82B366" stroke-width="1.5"/>
    <text x="445" y="320" fill="#333333" font-family="Helvetica" font-size="11" text-anchor="middle" font-weight="bold">NAT Gateway</text>
    <text x="445" y="338" fill="#555555" font-family="Helvetica" font-size="9" text-anchor="middle">(Elastic IP)</text>

    <!-- Internet Gateway -->
    <rect x="520" y="300" width="110" height="50" rx="6" fill="#D5E8D4" stroke="#82B366" stroke-width="1.5"/>
    <text x="575" y="320" fill="#333333" font-family="Helvetica" font-size="11" text-anchor="middle" font-weight="bold">Internet GW</text>
    <text x="575" y="338" fill="#555555" font-family="Helvetica" font-size="9" text-anchor="middle">(igw)</text>

    <!-- Bastion -->
    <rect x="650" y="300" width="110" height="50" rx="6" fill="#E1D5E7" stroke="#9673A6" stroke-width="1.5"/>
    <text x="705" y="320" fill="#333333" font-family="Helvetica" font-size="11" text-anchor="middle" font-weight="bold">Bastion Host</text>
    <text x="705" y="338" fill="#555555" font-family="Helvetica" font-size="9" text-anchor="middle">(EC2)</text>

    <!-- Private Subnets -->
    <rect x="370" y="420" width="780" height="360" rx="8" fill="none" stroke="#B85450" stroke-width="1.5" stroke-dasharray="5,3"/>
    <text x="380" y="438" fill="#B85450" font-family="Helvetica" font-size="10" font-weight="bold">Private Subnets 172.16.2.0/24 (1a) &amp; 172.16.3.0/24 (1c)</text>

    <!-- ALB -->
    <rect x="490" y="460" width="160" height="65" rx="8" fill="#DAE8FC" stroke="#6C8EBF" stroke-width="2"/>
    <text x="570" y="480" fill="#333333" font-family="Helvetica" font-size="12" text-anchor="middle" font-weight="bold">ALB (Internal)</text>
    <text x="570" y="496" fill="#555555" font-family="Helvetica" font-size="10" text-anchor="middle">HTTP:80</text>
    <text x="570" y="512" fill="#555555" font-family="Helvetica" font-size="10" text-anchor="middle">Rule: /api/* → ECS</text>

    <!-- CloudFront to ALB arrow -->
    <path d="M 640,185 L 750,185 L 750,400 L 570,400 L 570,460" fill="none" stroke="#333333" stroke-width="1.5"/>
    <polygon points="567,456 570,462 573,456" fill="#333333"/>
    <text x="765" y="300" fill="#333333" font-family="Helvetica" font-size="9" transform="rotate(90,765,300)">/api/* (VPC Origin)</text>

    <!-- ECS Fargate -->
    <rect x="470" y="560" width="200" height="90" rx="8" fill="#DAE8FC" stroke="#6C8EBF" stroke-width="2"/>
    <text x="570" y="582" fill="#333333" font-family="Helvetica" font-size="12" text-anchor="middle" font-weight="bold">ECS Fargate</text>
    <text x="570" y="598" fill="#555555" font-family="Helvetica" font-size="10" text-anchor="middle">CPU: 256 / Mem: 512MB</text>
    <text x="570" y="614" fill="#555555" font-family="Helvetica" font-size="10" text-anchor="middle">NestJS API (:3000)</text>
    <text x="570" y="630" fill="#555555" font-family="Helvetica" font-size="10" text-anchor="middle">Docker Image from ECR</text>

    <!-- ALB to ECS arrow -->
    <line x1="570" y1="525" x2="570" y2="560" stroke="#333333" stroke-width="1.5"/>
    <polygon points="567,556 570,562 573,556" fill="#333333"/>
    <text x="585" y="545" fill="#333333" font-family="Helvetica" font-size="9">:3000</text>

    <!-- Aurora -->
    <ellipse cx="885" cy="580" rx="80" ry="15" fill="#FFF2CC" stroke="#D6B656" stroke-width="2"/>
    <rect x="805" y="580" width="160" height="70" fill="#FFF2CC" stroke="#D6B656" stroke-width="2"/>
    <ellipse cx="885" cy="650" rx="80" ry="15" fill="#FFF2CC" stroke="#D6B656" stroke-width="2"/>
    <line x1="805" y1="580" x2="805" y2="650" stroke="#D6B656" stroke-width="2"/>
    <line x1="965" y1="580" x2="965" y2="650" stroke="#D6B656" stroke-width="2"/>
    <text x="885" y="604" fill="#333333" font-family="Helvetica" font-size="12" text-anchor="middle" font-weight="bold">Aurora Serverless v2</text>
    <text x="885" y="620" fill="#555555" font-family="Helvetica" font-size="10" text-anchor="middle">PostgreSQL 16.6</text>
    <text x="885" y="636" fill="#555555" font-family="Helvetica" font-size="10" text-anchor="middle">0.0-1.0 ACU / Encrypted</text>

    <!-- ECS to Aurora arrow -->
    <line x1="670" y1="605" x2="805" y2="605" stroke="#333333" stroke-width="1.5"/>
    <polygon points="801,602 807,605 801,608" fill="#333333"/>
    <text x="735" y="598" fill="#333333" font-family="Helvetica" font-size="9">:5432 (SSL)</text>

    <!-- Bastion to Aurora arrow -->
    <path d="M 705,350 L 705,410 L 885,410 L 885,565" fill="none" stroke="#999999" stroke-width="1" stroke-dasharray="5,3"/>
    <polygon points="882,561 885,567 888,561" fill="#999999"/>
    <text x="800" y="405" fill="#999999" font-family="Helvetica" font-size="9">:5432 (admin)</text>

    <!-- ECR -->
    <rect x="810" y="460" width="120" height="50" rx="6" fill="#DAE8FC" stroke="#6C8EBF" stroke-width="1.5"/>
    <text x="870" y="480" fill="#333333" font-family="Helvetica" font-size="11" text-anchor="middle" font-weight="bold">ECR</text>
    <text x="870" y="496" fill="#555555" font-family="Helvetica" font-size="9" text-anchor="middle">Container Registry</text>

    <!-- ECR to ECS arrow -->
    <path d="M 810,495 L 750,495 L 750,590 L 670,590" fill="none" stroke="#999999" stroke-width="1" stroke-dasharray="5,3"/>
    <polygon points="674,587 668,590 674,593" fill="#999999"/>
    <text x="763" y="545" fill="#999999" font-family="Helvetica" font-size="9">image pull</text>

    <!-- SSM -->
    <rect x="390" y="680" width="150" height="50" rx="6" fill="#F5F5F5" stroke="#999999" stroke-width="1.5"/>
    <text x="465" y="700" fill="#333333" font-family="Helvetica" font-size="10" text-anchor="middle" font-weight="bold">SSM Parameter Store</text>
    <text x="465" y="716" fill="#555555" font-family="Helvetica" font-size="9" text-anchor="middle">SecureString (DB URL)</text>

    <!-- ECS to SSM arrow -->
    <path d="M 520,650 L 480,650 L 480,680" fill="none" stroke="#999999" stroke-width="1" stroke-dasharray="5,3"/>
    <polygon points="477,676 480,682 483,676" fill="#999999"/>
    <text x="475" y="665" fill="#999999" font-family="Helvetica" font-size="9">secrets</text>

    <!-- CloudWatch -->
    <rect x="570" y="680" width="150" height="50" rx="6" fill="#F5F5F5" stroke="#999999" stroke-width="1.5"/>
    <text x="645" y="700" fill="#333333" font-family="Helvetica" font-size="10" text-anchor="middle" font-weight="bold">CloudWatch Logs</text>
    <text x="645" y="716" fill="#555555" font-family="Helvetica" font-size="9" text-anchor="middle">Retention: 7 days</text>

    <!-- ECS to CloudWatch arrow -->
    <path d="M 600,650 L 630,650 L 630,680" fill="none" stroke="#999999" stroke-width="1" stroke-dasharray="5,3"/>
    <polygon points="627,676 630,682 633,676" fill="#999999"/>
    <text x="640" y="665" fill="#999999" font-family="Helvetica" font-size="9">logs</text>

    <!-- VPC Endpoints -->
    <rect x="980" y="460" width="140" height="50" rx="6" fill="#F5F5F5" stroke="#999999" stroke-width="1.5"/>
    <text x="1050" y="480" fill="#333333" font-family="Helvetica" font-size="10" text-anchor="middle" font-weight="bold">VPC Endpoints</text>
    <text x="1050" y="496" fill="#555555" font-family="Helvetica" font-size="9" text-anchor="middle">SSM, ECR, Logs</text>

    <!-- CI/CD Section -->
    <rect x="15" y="340" width="170" height="300" rx="8" fill="none" stroke="#9673A6" stroke-width="1.5" stroke-dasharray="5,3"/>
    <text x="100" y="358" fill="#9673A6" font-family="Helvetica" font-size="11" text-anchor="middle" font-weight="bold">CI/CD</text>

    <!-- CodePipeline Frontend -->
    <rect x="30" y="375" width="140" height="55" rx="6" fill="#E1D5E7" stroke="#9673A6" stroke-width="1.5"/>
    <text x="100" y="395" fill="#333333" font-family="Helvetica" font-size="10" text-anchor="middle" font-weight="bold">CodePipeline</text>
    <text x="100" y="410" fill="#555555" font-family="Helvetica" font-size="9" text-anchor="middle">(Frontend)</text>
    <text x="100" y="422" fill="#555555" font-family="Helvetica" font-size="8" text-anchor="middle">Source → Build</text>

    <!-- CodePipeline Backend -->
    <rect x="30" y="450" width="140" height="60" rx="6" fill="#E1D5E7" stroke="#9673A6" stroke-width="1.5"/>
    <text x="100" y="470" fill="#333333" font-family="Helvetica" font-size="10" text-anchor="middle" font-weight="bold">CodePipeline</text>
    <text x="100" y="485" fill="#555555" font-family="Helvetica" font-size="9" text-anchor="middle">(Backend)</text>
    <text x="100" y="500" fill="#555555" font-family="Helvetica" font-size="8" text-anchor="middle">Source → Build → Deploy</text>

    <!-- GitHub -->
    <rect x="30" y="540" width="140" height="55" rx="6" fill="#F5F5F5" stroke="#333333" stroke-width="1.5"/>
    <text x="100" y="562" fill="#333333" font-family="Helvetica" font-size="11" text-anchor="middle" font-weight="bold">GitHub</text>
    <text x="100" y="580" fill="#555555" font-family="Helvetica" font-size="9" text-anchor="middle">(CodeStar Connection)</text>

    <!-- GitHub to Pipelines arrows -->
    <line x1="100" y1="540" x2="100" y2="510" stroke="#999999" stroke-width="1" stroke-dasharray="4,3"/>
    <polygon points="97,514 100,508 103,514" fill="#999999"/>
    <line x1="100" y1="540" x2="100" y2="430" stroke="#999999" stroke-width="1" stroke-dasharray="4,3"/>

    <!-- Pipeline to S3 -->
    <path d="M 170,400 L 220,400 L 220,260 L 270,260" fill="none" stroke="#9673A6" stroke-width="1" stroke-dasharray="5,3"/>
    <polygon points="266,257 272,260 266,263" fill="#9673A6"/>
    <text x="235" y="330" fill="#9673A6" font-family="Helvetica" font-size="8" transform="rotate(-90,235,330)">deploy dist/</text>

    <!-- Pipeline to ECR -->
    <path d="M 170,480 L 300,480 L 300,485 L 810,485" fill="none" stroke="#9673A6" stroke-width="1" stroke-dasharray="5,3"/>
    <polygon points="806,482 812,485 806,488" fill="#9673A6"/>
    <text x="500" y="477" fill="#9673A6" font-family="Helvetica" font-size="8">docker push</text>

    <!-- Security Groups Legend -->
    <rect x="15" y="830" width="460" height="60" rx="6" fill="#FAFAFA" stroke="#CCCCCC" stroke-width="1"/>
    <text x="25" y="848" fill="#333333" font-family="Helvetica" font-size="10" font-weight="bold">Security Groups Flow:</text>
    <text x="25" y="864" fill="#555555" font-family="Helvetica" font-size="9">CloudFront VPC Origin SG → ALB SG (HTTP:80) → ECS SG (:3000) → DB SG (:5432)</text>
    <text x="25" y="878" fill="#555555" font-family="Helvetica" font-size="9">Bastion SG (Specified IPs) → DB SG (:5432)</text>

    <!-- Region Label -->
    <text x="700" y="875" fill="#888888" font-family="Helvetica" font-size="11" font-style="italic">Region: ap-northeast-1 (Tokyo)</text>

    <!-- Legend -->
    <rect x="530" y="830" width="280" height="60" rx="6" fill="#FAFAFA" stroke="#CCCCCC" stroke-width="1"/>
    <line x1="545" y1="850" x2="575" y2="850" stroke="#333333" stroke-width="1.5"/>
    <text x="580" y="854" fill="#555555" font-family="Helvetica" font-size="9">Data Flow</text>
    <line x1="545" y1="868" x2="575" y2="868" stroke="#999999" stroke-width="1" stroke-dasharray="5,3"/>
    <text x="580" y="872" fill="#555555" font-family="Helvetica" font-size="9">Config / Deploy / Auxiliary</text>
    <rect x="670" y="842" width="40" height="14" rx="3" fill="#DAE8FC" stroke="#6C8EBF" stroke-width="1"/>
    <text x="715" y="854" fill="#555555" font-family="Helvetica" font-size="9">Compute/Network</text>
    <rect x="670" y="860" width="40" height="14" rx="3" fill="#FFF2CC" stroke="#D6B656" stroke-width="1"/>
    <text x="715" y="872" fill="#555555" font-family="Helvetica" font-size="9">Database</text>
  </g>
</svg>